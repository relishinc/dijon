<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: core/SaveManager.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: core/SaveManager.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Used for saving data to / retrieving data from LocalStorage
 * @param {Phaser.Game} game the Phaser.Game instance
 * @constructor
 */
Dijon.SaveManager = function(game) {
    this.game = game;
    this._init();
};

Dijon.SaveManager.prototype = {
    constructor: Dijon.SaveManager,

    // private methods
    /**
     * checks whether LocalStorage is available
     * @return {void}
     * @private
     */
    _init: function() {
        this._localStorageAvailable = this._getIsLocalStorageAvailable();
        console.log('saving available', this._localStorageAvailable);
    },

    /**
     * converts object to a json string for saving
     * @param  {Object} data the json object to store
     * @return {String}      the stringified json
     * @private
     */
    _getString: function(data) {
        if (typeof data === 'string') {
            return data;
        }

        var jsonData;

        try {
            jsonData = JSON.stringify(data);
        } catch (e) {
            console.log('Could not convert' + data + ' to json');
            return null;
        }

        return jsonData;
    },

    /**
     * gets whether local storage is available
     * @return {Boolean}
     * @private
     */
    _getIsLocalStorageAvailable: function() {
        try {
            return 'localStorage' in window &amp;&amp; window['localStorage'] !== null;
        } catch (e) {
            return false;
        }
    },

    // public methods
    /**
     * gets stored data with the specified key
     * @param  {String}  key    the LocalStorage key where the data is stored
     * @param  {Boolean} isJSON is the stored data just a string or is it stringified json (assumes it's JSON)
     * @return {String | Object
}         the retrieved data - if it's a JSON string, we parse the data and return the JSON object
     */
    getData: function(key, isJSON) {
        var data = localStorage[key];
        if (typeof data === 'undefined') {
            console.log('no data saved with the key', key);
            return null;
        }

        if (isJSON !== false) {
            data = JSON.parse(data);
        }
        return data;
    },

    /**
     * saves data to localstorage
     * @param  {String} key   the LocalStorage key the data will be saved to
     * @param  {String|Object} value the data to save (if it's an object, will be stringified before saving)
     * @return {void}
     */
    saveData: function(key, value) {
        if (!this._localStorageAvailable) {
            console.log('no local storage');
            return false;
        }
        localStorage[key] = this._getString(value);
    },

    /**
     * clear stored data
     * @param  {String} key the LocalStorage key to clear
     * @return {void}
     */
    clearData: function(key) {
        if (!this._localStorageAvailable) {
            console.log('no local storage');
            return false;
        }

        try {
            localStorage.removeItem(key);
        } catch (e) {}

    }
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-Dijon.html">Dijon</a></li></ul><h3>Classes</h3><ul><li><a href="Dijon.AssetManager.html">AssetManager</a></li><li><a href="Dijon.AudioManager.html">AudioManager</a></li><li><a href="Dijon.BaseComponent.html">BaseComponent</a></li><li><a href="Dijon.BaseMediator.html">BaseMediator</a></li><li><a href="Dijon.BaseState.html">BaseState</a></li><li><a href="Dijon.CopyModel.html">CopyModel</a></li><li><a href="Dijon.InvisibleButton.html">InvisibleButton</a></li><li><a href="Dijon.Model.html">Model</a></li><li><a href="Dijon.SaveManager.html">SaveManager</a></li><li><a href="Dijon.SequenceManager.html">SequenceManager</a></li><li><a href="Dijon.TransitionManager.html">TransitionManager</a></li><li><a href="Dijon.UIGroup.html">UIGroup</a></li><li><a href="Dijon.UISprite.html">UISprite</a></li><li><a href="Dijon.UIText.html">UIText</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a> on Fri Jun 19 2015 16:23:53 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
